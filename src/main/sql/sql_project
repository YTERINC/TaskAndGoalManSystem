CREATE TABLE Person
(
    id            int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    full_name     varchar(100) NOT NULL UNIQUE,
    email         varchar(100) UNIQUE,
    year_of_birth int          NOT NULL
);


CREATE TABLE Task
(
    id        int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    task_name varchar(200) NOT NULL,
    priority  int          NOT NULL,
    status    boolean      NOT NULL,
    created_at timestamp,
    deadline timestamp,
    execution_at timestamp,
    person_id int REFERENCES Person(id) ON DELETE SET NULL
);

TRUNCATE table Person CASCADE;
TRUNCATE table task;

ALTER TABLE Person DROP column year_of_birth;
ALTER TABLE Person ADD column year_of_birth date;



ALTER TABLE Person ADD column role varchar(100) NOT NULL;
ALTER TABLE Person ADD column description varchar(300);

ALTER TABLE Task ADD column description varchar(300);
ALTER TABLE Task ADD column report varchar(300);


INSERT INTO Person(full_name, email, year_of_birth,role) values ('test1', 'test@mail.ru', 1977,'ROLE_USER');
INSERT INTO Person(full_name, email, year_of_birth,role) values ('test2', 'test2@mail.ru', 1978, 'ROLE_ADMIN');
INSERT INTO Person(full_name, email, year_of_birth,role) values ('test3', 'test3@mail.ru', 1978, 'ROLE_CHIEF');

INSERT INTO Task(task_name, priority, status, person_id) values ('task1', 1, false, 11);
INSERT INTO Task(task_name, priority, status, person_id) values ('task2', 1, false, 10);
INSERT INTO Task(task_name, priority, status, person_id) values ('task3', 1, false, 11);
INSERT INTO Task(task_name, priority, status, person_id) values ('task4', 1, false, 10);
INSERT INTO Task(task_name, priority, status, person_id) values ('task5', 1, false, 15);
INSERT INTO Task(task_name, priority, status, person_id) values ('task6', 1, false, 15);

select * from person;
select * from Task;